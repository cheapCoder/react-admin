<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>10_ComponentLife</title>
	</head>
	<body>
		<div id="example"></div>

		<!--引入react核心库-->
		<script
			type="text/javascript"
			src="../js/react.development.js"
		></script>
		<!--引入操作react操作DOM库-->
		<script
			type="text/javascript"
			src="../js/react-dom.development.js"
		></script>
		<!--引入babel-->
		<script type="text/javascript" src="../js/babel.min.js"></script>

		<script type="text/babel">
			/*
			  需求: 自定义组件
			    1. 让指定的文本做显示/隐藏的动画
			    2. 切换时间为2S
			    3. 点击按钮从界面中移除组件界面（当前组件在页面上消失）
			   */

			class TimeRecord extends React.Component {
        constructor() {
          super();
          console.log("constructor");
        }
				state = {
					opacity: 1,
        }
        componentWillMount() {
          console.log('componentWillMount');
        }
				componentDidMount() {
          console.log('componentDidMount');
					this.timeId = setInterval(() => {
						let { opacity } = this.state;
						opacity -= 0.1;
						if (opacity <= 0) {
							opacity = 1;
						}
						this.setState({ opacity });
					}, 200);
				}
				clear = () => {
					ReactDOM.unmountComponentAtNode(
						document.getElementById("example")
					);
        }
        componentWillUpdate() {
          console.log("componentWillUpdate");
        }
        componentDidUpdate() {
          console.log("componentDidUpdate");
        }
        componentWillUnmount() {
          console.log("componentWillUnmount");
          clearInterval(this.timeId)
        }

				render() {
          console.log("render");
					return (
						<div>
							<h3 style={{ opacity: this.state.opacity }}>
								what the hell ?
							</h3>
							<button onClick={this.clear}>click it</button>
						</div>
					);
				}
			}

			ReactDOM.render(<TimeRecord />, document.getElementById("example"));
		</script>
	</body>
</html>
